<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="automationTestingTool">

<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Optimize mobile viewport -->

    <title>Automation Testing Tool</title>

    <!-- SCROLLS -->
    <link rel="stylesheet" href="bower_components/boostrap/dist/css/bootstrap.min.css">
    <!-- load bootstrap -->


    <!-- SPELLS -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <!-- load jquery -->
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="bower_components/angular-touch/angular-touch.min.js"></script>
    <script src="bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="bower_components/boostrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
    <script src="bower_components/chart.js/dist/Chart.min.js"></script>
    <script src="core.js"></script>

</head>
<!-- SET THE CONTROLLER AND GET ALL TODOS -->

<body ng-controller="mainController">
    <div class="container">

        <!-- HEADER AND TODO COUNT -->
        <div class="jumbotron text-center">
            <h1>Automation Testing Tool</h1>
        </div>

        <uib-tabset>
            <uib-tab index="0" heading="Tests Suites">
                <table id="test-suites" class="table table-striped">
                    <tbody>
                        <tr ng-repeat="testSuite in testSuites">
                            <td>
                                <p>
                                    <strong>{{testSuite.name}}</strong>
                                </p>
                                <p>{{testSuite.describe}}</p>
                            </td>
                            <td>
                                <button class="btn btn-primary" type="button">Assertions
                                    <span class="badge">{{testSuite.assertions.length}}</span>
                                </button>
                            </td>
                            <td>
                                <select name="" id="" ng-model="testSuite.providerName">
                                    <option value="cypress">cypress</option>
                                    <option value="nightwatch">nightwatch</option>
                                    <option value="cucumber">cucumber</option>
                                </select>
                            </td>
                            <td>
                                <button class="btn btn-warning" type="button" ng-click="execute(testSuite)">Execute
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </uib-tab>
            <uib-tab index="1" heading="Historic">
                <table id="executions" class="table table-striped">
                    <tbody ng-repeat="execution in executions">
                        <tr>
                            <td>
                                <img src="images/{{execution.provider}}Logo.png" alt="" style="max-width: 48px;">
                            </td>
                            <td>
                                <p>
                                    <strong>{{execution.name}}</strong>
                                </p>
                                <p>{{execution.describe}}</p>
                            </td>
                            <td>
                                <span class="label label-success" ng-if="execution.failures <= 0">
                                    <span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span> success</span>
                                <span class="label label-danger" ng-if="execution.failures > 0">
                                    <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> fail</span>
                            </td>
                            <td>
                                {{execution.timestamp}}
                            </td>
                            <td>
                                <button class="btn btn-default">
                                    <span class="glyphicon glyphicon-download" aria-hidden="true"></span> Download Test
                                </button>

                                <button class="btn btn-default" ng-click="selectExecution(execution)">
                                    <span class="glyphicon glyphicon-stats" aria-hidden="true"></span> More Stats
                                </button>
                            </td>
                        </tr>
                        <tr ng-if="selectedExecution._id === execution._id">
                            <td colspan="3">
                                <canvas id="success-vs-failures-chart" width="400" height="400">

                                </canvas>
                            </td>
                            <td colspan="2">
                                <div class="jumbotron">
                                    <h2>
                                        <strong>Total Time:</strong>
                                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span> {{selectedExecution.time}}</h2>

                                    <button class="btn btn-primary" type="button">Assertions
                                        <span class="badge">{{selectedExecution.assertions}}</span>
                                    </button>

                                    <button class="btn btn-success" type="button">Success
                                        <span class="badge">{{selectedExecution.successTests}}</span>
                                    </button>

                                    <button class="btn btn-danger" type="button">Failures
                                        <span class="badge">{{selectedExecution.failures}}</span>
                                    </button>
                                </div>
                                <table class="table table-striped">
                                    <tbody ng-repeat="testcase in selectedExecution.results.testsuites.testsuite[1].testcase">
                                        <tr ng-class="testcase.failure ? 'danger' : 'success'">
                                            <td>{{testcase.$.name}}</td>
                                            <td>{{testcase.$.classname}}</td>
                                            <td>
                                                <span class="glyphicon glyphicon-time" aria-hidden="true"></span> {{testcase.$.time}}</td>
                                            <td>
                                                <button class="btn btn-default" ng-disabled="testcase.failure === undefined" ng-click="testcase.showFailure = true">
                                                    <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> See More
                                                </button>
                                            </td>
                                        </tr>
                                        <tr ng-if="testcase.showFailure">
                                            <td colspan="4">
                                                <p>{{testcase.failure}}</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </uib-tab>
            <uib-tab index="2" heading="Create Random Test">
                <div ng-include="'RandomTest.html'"></div>
            </uib-tab>
            <uib-tab index="3" heading="Mutation testing">
                <table id="mutationtesting" class="table table-striped">
                    <tbody>
                        <tr>
                            <td>
                              <label for="repoJSPath" class="col-sm-2 control-label">
                                  JS Mutation
                              </label>
                              <div class="col-sm-9">
                                  <input type="text" class="form-control" id="repoJSPath" name="repoPath"  placeholder="repository URL" ng-model="mutation.js.repository" required>
                              </div>
                              </br></br></br>
                              <label for ="mutatorsTable" class="col-sm-2 control-label">Mutators</label>
                                <table id="mutatorsTable">
                                  <tr>
                                    <td style="border-top-width: 0px !important;">
                                      <label><input type="checkbox" ng-model="mutation.js.conditionalsBoundary" ng-true-value="'conditionalsBoundary'" ng-false-value="''"/> ConditionalsBoundary</label><br/>
                                      <label><input type="checkbox" ng-model="mutation.js.deletion" ng-true-value="'deletion'" ng-false-value="''"/> Deletion </label><br/>
                                      <label><input type="checkbox" ng-model="mutation.js.increments" ng-true-value="'increments'" ng-false-value="''"/> Increments</label><br/>
                                    </td>
                                    <td style="border-top-width: 0px !important;">
                                      <label><input type="checkbox" ng-model="mutation.js.invertNegatives" ng-true-value="'invertNegatives'" ng-false-value="''"/> InvertNegatives</label><br/>
                                      <label><input type="checkbox" ng-model="mutation.js.math" ng-true-value="'math'" ng-false-value="''"/> Math</label><br/>
                                      <label><input type="checkbox" ng-model="mutation.js.negateConditionals" ng-true-value="'negateConditionals'" ng-false-value="''"/> NegateConditionals</label><br/>
                                    </td>
                                    <td style="border-top-width: 0px !important;">
                                      <label><input type="checkbox" ng-model="mutation.js.removeConditionals" ng-true-value="'removeConditionals'" ng-false-value="''"/> RemoveConditionals</label><br/>
                                      <label><input type="checkbox" ng-model="mutation.js.returnValues" ng-true-value="'returnValues'" ng-false-value="''"/> ReturnValues</label><br/>
                                      <label><input type="checkbox" ng-model="mutation.js.switchCases" ng-true-value="'switchCases'" ng-false-value="''"/> SwitchCases</label><br/>
                                    </td>
                                  </tr>
                                </table>
                                </br>
                                <label for ="concurrency" class="col-sm-2 control-label">concurrency</label>
                                <div class="col-sm-9">
                                    <input type="number" class="form-control" id="concurrency" name="concurrency"  placeholder="Concurrency of mutant runners [default: 1]" ng-model="mutation.js.concurrency" min="0" value="1">
                                </div>
                              </br>
                            </td>
                            <td>
                                <button class="btn btn-warning" type="button" ng-click="executeMutationTestingJS()">Execute
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </uib-tab>
        </uib-tabset>

    </div>

</body>

</html>
